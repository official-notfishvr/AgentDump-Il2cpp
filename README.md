# AgentDump

A command-line tool for searching and analyzing IL2CPP dump files from Unity games. Parse `dump.cs` files generated by tools like Il2CppDumper and quickly search through classes, methods, fields, and more.

## Features

- Parse IL2CPP dump files and index all classes, methods, and fields
- Search by class name, namespace, base class, interface, or type
- Search methods by name, return type, parameter type, RVA, or offset
- Search fields by name, type, or memory offset
- Smart search across all categories simultaneously
- View inheritance chains and derived classes
- Find Unity-specific types (MonoBehaviour, ScriptableObject)
- Output results as plain text, JSON, or TypeScript

## Requirements

- .NET 8.0 SDK

## Installation

```bash
git clone https://github.com/official-notfishvr/AgentDump-Il2cpp.git
cd AgentDump
dotnet build
```

## Usage

### Basic Usage

```bash
# Run with default dump folder (game_il2cpp_dump)
AgentDump.exe

# Specify custom dump folder
AgentDump.exe --path "C:\path\to\dump\folder"

# Execute single command and exit
AgentDump.exe --cmd "class Player" --json
```

### Command Line Options

| Option | Short | Description |
|--------|-------|-------------|
| `--path` | `-p` | IL2CPP dump folder path (default: `game_il2cpp_dump`) |
| `--cmd` | `-c` | Execute a single command and exit |
| `--json` | `-j` | Output results as JSON |
| `--ts` | | Output results as TypeScript |
| `--limit` | `-l` | Maximum results to return (default: 50) |
| `--help` | `-h` | Show help |

### Interactive Commands

#### Class Search
| Command | Description |
|---------|-------------|
| `class <name>` | Search classes by name (partial match) |
| `class.exact <name>` | Search classes by exact name |
| `ns <namespace>` | Search by namespace |
| `fullname <name>` | Search by full qualified name |
| `base <class>` | Find classes inheriting from a base class |
| `impl <interface>` | Find classes implementing an interface |
| `type <type>` | Filter by type: `class`, `struct`, `enum`, `interface` |
| `mono` | List all MonoBehaviour classes |
| `scriptable` | List all ScriptableObject classes |

#### Field Search
| Command | Description |
|---------|-------------|
| `field <name>` | Search fields by name |
| `field.type <type>` | Search fields by type |
| `field.offset <0x10>` | Search fields by memory offset |

#### Method Search
| Command | Description |
|---------|-------------|
| `method <name>` | Search methods by name |
| `method.ret <type>` | Search by return type |
| `method.param <type>` | Search by parameter type |
| `rva <0x123>` | Search by RVA address |
| `method.offset <0x123>` | Search by method offset |

#### Advanced
| Command | Description |
|---------|-------------|
| `find <query>` | Smart search across classes, methods, and fields |
| `hierarchy <class>` | Show inheritance chain |
| `derived <class>` | Find all derived classes |
| `hasmeth <name>` | Find classes containing a method |
| `hasfield <name>` | Find classes containing a field |

#### Details & Info
| Command | Description |
|---------|-------------|
| `detail <class>` | Show full class details |
| `idx <index>` | Get class by TypeDefIndex |
| `stats` | Show dump statistics |
| `namespaces` | List all namespaces |
| `help` | Show command help |
| `exit` | Exit interactive mode |

## Examples

```bash
# Search for player-related classes
> class Player

# Find all classes with health fields
> hasfield health

# Get inheritance chain for a class
> hierarchy PlayerController

# Search methods returning bool
> method.ret bool

# Smart search for "damage"
> find damage

# Export results as JSON
AgentDump.exe --cmd "class Player" --json --limit 100
```

## Project Structure

```
AgentDump/
├── Program.cs                    # Entry point and CLI handling
├── Models/
│   └── Il2CppClass.cs           # Data models (class, field, method, etc.)
├── Parser/
│   └── Il2CppDumpParser.cs      # dump.cs file parser
├── Search/
│   └── Il2CppSearchEngine.cs    # Search and indexing engine
└── Output/
    └── ResultFormatter.cs        # JSON/TypeScript/text formatting
```
